Per connettere tra loro più LAN si utilizzano i Router del livello $3$ della pila [[100. Introduzione alle reti#Protocolli di rete|ISO-OSI]], insieme ad una **backbone**, ovvero il collegamento vero e proprio (la cablatura).

Ognuno di questi Router possiede internamente una **tabella di routing/forwarding**, che sfruttano per trovare lo shortest path verso il destinatario del pacchetto ricevuto (anche mediante nodi intermedi). Ad esempio:

![[Pasted image 20251103093252.png]]
In questa rete, il Router 1 potrebbe voler mandare un messaggio al Router 2. Allora, al momento della decodifica del messaggio ricevuto in input, cercherà nella sua tabella di routing il pacchetto più breve verso il destinatario specificato, per poi inviare il pacchetto lungo quella ramificazione della rete.
## Internet Protocol (IP)
I Router sono dispositivi che permettono quindi la connessione di più reti LAN tra loro, formando reti più estese, fino ad arrivare all'Internet moderno.

All'interno di tale rete, occorre un sistema di indirizzamento migliore, perché l'idea del conoscere sempre l'indirizzo MAC di ogni macchina all'interno di una rete così vasta non è semplicemente sostenibile.

Per ovviare a tale problema, si è pensato di implementare un nuovo protocollo, quello **IP**:
- ad ogni macchina si fornisce un indirizzo gerarchico (basato sulla rete alla quale il dispositivo appartiene) e globale;
- si ha comunicazione [[100. Introduzione alle reti#Reti a commutazione di pacchetto#Servizi orientati alla connessione e non|connectionless]];
- la gestione delle singole LAN viene lasciato al Router associato ad esse;
- il forwarding tra LAN avviene mediante apposite tabelle aggiornabili dinamicamente, contenute in ogni Router della rete;
- prima dell'invio, i dati vengono suddivisi in pacchetti più piccoli, ognuno contenente (oltre ai dati da inviare) l'IP del mittente e del destinatario.
### Indirizzamento IPv4
L'IP definisce un nuovo tipo di indirizzo, quello IP. Ad una specifica scheda di rete viene associato ora quindi un indirizzo IP.
Ogni indirizzo IP è composto da $4$ byte, suddivisi tra Network Number (l'identificativo della LAN) e Host number (il MAC dell'host). In base al valore del Network Number, si può suddividere le reti in $3$ classi:

![[Pasted image 20251103100543.png]]